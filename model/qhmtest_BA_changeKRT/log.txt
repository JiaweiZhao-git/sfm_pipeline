Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5590.jpg :34456
Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5591.jpg :40172
Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5592.jpg :41339
Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5593.jpg :40625
Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5594.jpg :40331
Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5595.jpg :29449
Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5596.jpg :31650
Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5597.jpg :40728
Extracting features: C:\Users\15297\Desktop\OpenCV_SFM\image\qhm_test\IMG_5598.jpg :44071
img0---img1 :365
img1---img0 :340
img0---img2 :48
img2---img0 :63
img0---img3 :25
img3---img0 :24
img0---img4 :15
img4---img0 :16
img0---img5 :12
img5---img0 :14
img0---img6 :17
img6---img0 :11
img0---img7 :8
img7---img0 :13
img0---img8 :13
img8---img0 :10
img1---img2 :1134
img2---img1 :1166
img1---img3 :235
img3---img1 :260
img1---img4 :79
img4---img1 :95
img1---img5 :39
img5---img1 :33
img1---img6 :35
img6---img1 :23
img1---img7 :18
img7---img1 :19
img1---img8 :15
img8---img1 :10
img2---img3 :1108
img3---img2 :1126
img2---img4 :254
img4---img2 :251
img2---img5 :87
img5---img2 :87
img2---img6 :60
img6---img2 :59
img2---img7 :22
img7---img2 :20
img2---img8 :9
img8---img2 :12
img3---img4 :814
img4---img3 :839
img3---img5 :223
img5---img3 :216
img3---img6 :68
img6---img3 :83
img3---img7 :34
img7---img3 :30
img3---img8 :14
img8---img3 :14
img4---img5 :1067
img5---img4 :1011
img4---img6 :289
img6---img4 :259
img4---img7 :46
img7---img4 :45
img4---img8 :12
img8---img4 :10
img5---img6 :886
img6---img5 :890
img5---img7 :162
img7---img5 :170
img5---img8 :41
img8---img5 :52
img6---img7 :734
img7---img6 :700
img6---img8 :83
img8---img6 :107
img7---img8 :556
img8---img7 :649
max match is :2---1:1166
before init BA 3D size is:993
before solve BA
Bundle Adjustment statistics (approximated RMSE):
 #views: 2
 #residuals: 3962
 Initial RMSE: 0.166491
 Final RMSE: 0.131053
 Time (s): 43.9675

K: [3416.312849162, 0, 2184;
 0, 3416.312849162, 1456;
 0, 0, 1] ---> [3424.851228216502, 0, 2168.424872410154;
 0, 3322.937184903706, 1444.879764112114;
 0, 0, 1]
image 2
R: [1, 0, 0;
 0, 1, 0;
 0, 0, 1] ---> [1, 0, 0;
 0, 1, 0;
 0, 0, 1]
T: [0;
 0;
 0] ---> [0;
 0;
 0]
image 1
R: [0.9684790509644852, -0.05273567265260186, -0.2434487146665781;
 0.05234880821102828, 0.9985963100803221, -0.008062987836441096;
 0.2435321952469859, -0.004935415265526973, 0.9698802562967967] ---> [0.9683568110603952, -0.05436129929327244, -0.243577370894936;
 0.05423903235467138, 0.9985019219037602, -0.007213828645456539;
 0.2436046260689047, -0.006225840798185823, 0.9698546412036108]
T: [0.8588887414303669;
 0.03371537179797356;
 0.5110512729156292] ---> [0.8589577482429113;
 0.03108197231603765;
 0.5047759908402911]
0 sees 127 points
3 sees 388 points
4 sees 119 points
5 sees 44 points
6 sees 26 points
7 sees 8 points
8 sees 5 points
register image 3
add match 2 --- 3 size:1108
solvePnPRansac is 1
after fusion structure size is 1909
0 sees 133 points
4 sees 423 points
5 sees 107 points
6 sees 52 points
7 sees 18 points
8 sees 7 points
register image 4
add match 3 --- 4 size:814
solvePnPRansac is 1
after fusion structure size is 2470
before add BA 3D size is:2470
before solve BA
Bundle Adjustment statistics (approximated RMSE):
 #views: 4
 #residuals: 10738
 Initial RMSE: 2.38082
 Final RMSE: 0.946125
 Time (s): 1360.08

K: [3424.851228216502, 0, 2168.424872410154;
 0, 3322.937184903706, 1444.879764112114;
 0, 0, 1] ---> [2902.464576687497, 0, 3308.559056501821;
 0, 2175.903421919908, 1395.952213687423;
 0, 0, 1]
image 2
R: [1, 0, 0;
 0, 1, 0;
 0, 0, 1] ---> [1, 0, 0;
 0, 1, 0;
 0, 0, 1]
T: [0;
 0;
 0] ---> [0;
 0;
 0]
image 1
R: [0.9683568110603952, -0.05436129929327244, -0.243577370894936;
 0.05423903235467138, 0.9985019219037602, -0.007213828645456539;
 0.2436046260689047, -0.006225840798185823, 0.9698546412036108] ---> [0.9485690879757273, -0.05714656124852793, -0.3113694844944913;
 0.0698290966054067, 0.9971159526285899, 0.02972665942975328;
 0.308772703787381, -0.04994044003658766, 0.9498238625370402]
T: [0.8589577482429113;
 0.03108197231603765;
 0.5047759908402911] ---> [0.7358342663000367;
 0.008393648005960116;
 0.8163982158731602]
image 3
R: [0.9757329083437603, 0.006998184045358164, 0.2188522720811792;
 -0.01486921686269647, 0.9992996349472695, 0.03433869514329328;
 -0.2184586870896126, -0.03675955677536422, 0.9751535966301726] ---> [0.9769869858502955, 0.01638650971727957, 0.2126685491050329;
 -0.01821382029669701, 0.9998120935237658, 0.006635841606325856;
 -0.2125198490244004, -0.01035663762570264, 0.9771018646117383]
T: [-1.039058759997769;
 -0.06286252697374645;
 0.2552989739985154] ---> [-0.9986046640660672;
 0.03189938502421924;
 0.007306318785016099]
image 4
R: [0.8372590769714817, 0.02843156359940307, 0.5460667397124233;
 -0.04127428985858891, 0.9990843409393205, 0.01126555309395196;
 -0.5452464314651968, -0.03197070348204062, 0.8376659257086514] ---> [0.8099482245385564, 0.04751483354354358, 0.5845735318676084;
 -0.03464711466383538, 0.9988485785260758, -0.03318274584643268;
 -0.5854771139953392, 0.00662251989557206, 0.8106618846460721]
T: [-2.463040335875011;
 0.07054898264552073;
 0.8003211464582259] ---> [-2.579384534495119;
 0.2012954415723202;
 0.1114328003812726]
correspond struct idx max is :2469
structure size is 2470
0 sees 137 points
5 sees 369 points
6 sees 122 points
7 sees 31 points
8 sees 10 points
register image 5
add match 4 --- 5 size:1067
solvePnPRansac is 1
after fusion structure size is 3336
0 sees 142 points
6 sees 502 points
7 sees 71 points
8 sees 13 points
register image 6
add match 5 --- 6 size:886
solvePnPRansac is 1
after fusion structure size is 3938
before add BA 3D size is:3938
before solve BA
Bundle Adjustment statistics (approximated RMSE):
 #views: 6
 #residuals: 17554
 Initial RMSE: 1.97538
 Final RMSE: 1.01272
 Time (s): 1340.36

K: [2902.464576687497, 0, 3308.559056501821;
 0, 2175.903421919908, 1395.952213687423;
 0, 0, 1] ---> [3190.020421198623, 0, 2690.067678933771;
 0, 2769.366035292448, 1303.296524387473;
 0, 0, 1]
image 2
R: [1, 0, 0;
 0, 1, 0;
 0, 0, 1] ---> [1, 0, 0;
 0, 1, 0;
 0, 0, 1]
T: [0;
 0;
 0] ---> [0;
 0;
 0]
image 1
R: [0.9485690879757273, -0.05714656124852793, -0.3113694844944913;
 0.0698290966054067, 0.9971159526285899, 0.02972665942975328;
 0.308772703787381, -0.04994044003658766, 0.9498238625370402] ---> [0.9616550891521836, -0.06715646014737754, -0.265912578431671;
 0.07171958339115987, 0.9973968199254281, 0.007475624444937729;
 0.2647183236308065, -0.02626011163565338, 0.9639681611292868]
T: [0.7358342663000367;
 0.008393648005960116;
 0.8163982158731602] ---> [0.8388473458552294;
 0.04336260584044908;
 0.6522891486449808]
image 3
R: [0.9769869858502955, 0.01638650971727957, 0.2126685491050329;
 -0.01821382029669701, 0.9998120935237658, 0.006635841606325856;
 -0.2125198490244004, -0.01035663762570264, 0.9771018646117383] ---> [0.9753639835373435, 0.02179127312184722, 0.2195227551619507;
 -0.0226107644689529, 0.9997435983613419, 0.001221010092345328;
 -0.2194398618033976, -0.006154506580151715, 0.9756066159577131]
T: [-0.9986046640660672;
 0.03189938502421924;
 0.007306318785016099] ---> [-1.100488152755981;
 0.0666770378156477;
 0.1960061909175765]
image 4
R: [0.8099482245385564, 0.04751483354354358, 0.5845735318676084;
 -0.03464711466383538, 0.9988485785260758, -0.03318274584643268;
 -0.5854771139953392, 0.00662251989557206, 0.8106618846460721] ---> [0.81935681893903, 0.06505843936789488, 0.5695803742450467;
 -0.06082061108803632, 0.9977974581520048, -0.02647802432727807;
 -0.5700484685752532, -0.01294727664074736, 0.8215090452956659]
T: [-2.579384534495119;
 0.2012954415723202;
 0.1114328003812726] ---> [-2.687230679560686;
 0.2049668990742022;
 0.5640497629150368]
image 5
R: [0.667013563817454, 0.1073988291507098, 0.7372641298616093;
 -0.08934614130157324, 0.9939450322278462, -0.06395732908826865;
 -0.7396689615754189, -0.02321129911578499, 0.6725704891498727] ---> [0.6858087109926368, 0.1383734867130064, 0.7145062561668045;
 -0.1377259223536221, 0.9886948571321164, -0.05927942132264701;
 -0.7146313610795862, -0.05775168963233255, 0.6971131616216615]
T: [-3.969825833497179;
 0.5217333838091858;
 0.7681205977578613] ---> [-3.948141777796269;
 0.5801938186668008;
 1.33547234007488]
image 6
R: [0.5081464506708309, 0.1140918757798437, 0.8536804018786385;
 -0.07515023745084087, 0.9932801998148139, -0.08801639885229195;
 -0.8579857962004495, -0.0194290642306886, 0.5133058396135785] ---> [0.5345202423609863, 0.1484822420570326, 0.8320102969916111;
 -0.1162789560283232, 0.9880044928885355, -0.1016185338264173;
 -0.8371184592943316, -0.04242812540973497, 0.54537376108766]
T: [-5.024042571160525;
 0.3669208660885245;
 1.571286601521165] ---> [-4.874450348683199;
 0.557715516762857;
 2.312628203267833]
correspond struct idx max is :3937
structure size is 3938
0 sees 152 points
7 sees 286 points
8 sees 39 points
register image 7
add match 6 --- 7 size:734
solvePnPRansac is 1
after fusion structure size is 4485
0 sees 152 points
8 sees 139 points
register image 0
add match 1 --- 0 size:340
solvePnPRansac is 1
after fusion structure size is 4729
before add BA 3D size is:4729
before solve BA
Bundle Adjustment statistics (approximated RMSE):
 #views: 8
 #residuals: 21262
 Initial RMSE: 1.18808
 Final RMSE: 1.01412
 Time (s): 1050.53

K: [3190.020421198623, 0, 2690.067678933771;
 0, 2769.366035292448, 1303.296524387473;
 0, 0, 1] ---> [3108.264975375866, 0, 2367.619142482341;
 0, 2996.093152333428, 1509.558130737022;
 0, 0, 1]
image 2
R: [1, 0, 0;
 0, 1, 0;
 0, 0, 1] ---> [1, 0, 0;
 0, 1, 0;
 0, 0, 1]
T: [0;
 0;
 0] ---> [0;
 0;
 0]
image 1
R: [0.9616550891521836, -0.06715646014737754, -0.265912578431671;
 0.07171958339115987, 0.9973968199254281, 0.007475624444937729;
 0.2647183236308065, -0.02626011163565338, 0.9639681611292868] ---> [0.9678148504518801, -0.05252180696988875, -0.2461216671433516;
 0.05241375982806792, 0.9986009583287034, -0.00699455543124161;
 0.246144699365009, -0.006130727331470817, 0.9692137025222541]
T: [0.8388473458552294;
 0.04336260584044908;
 0.6522891486449808] ---> [0.8516855159474228;
 0.03621442537316936;
 0.5796281910768842]
image 3
R: [0.9753639835373435, 0.02179127312184722, 0.2195227551619507;
 -0.0226107644689529, 0.9997435983613419, 0.001221010092345328;
 -0.2194398618033976, -0.006154506580151715, 0.9756066159577131] ---> [0.9764260915402218, 0.006103563503289594, 0.2157656929913739;
 -0.006471214534491958, 0.9999785639409191, 0.0009975174714134409;
 -0.2157549794139989, -0.002370268174385818, 0.97644465828169]
T: [-1.100488152755981;
 0.0666770378156477;
 0.1960061909175765] ---> [-1.117150527440188;
 0.06230837935366215;
 0.2877594774849253]
image 4
R: [0.81935681893903, 0.06505843936789488, 0.5695803742450467;
 -0.06082061108803632, 0.9977974581520048, -0.02647802432727807;
 -0.5700484685752532, -0.01294727664074736, 0.8215090452956659] ---> [0.837337798544053, 0.02267035327289882, 0.5462155858375708;
 -0.02142605248748393, 0.9997330359529079, -0.008647606558201683;
 -0.5462658102098303, -0.004462275973517865, 0.8375999956357054]
T: [-2.687230679560686;
 0.2049668990742022;
 0.5640497629150368] ---> [-2.656365830955063;
 0.1560612214250315;
 0.7451539244569692]
image 5
R: [0.6858087109926368, 0.1383734867130064, 0.7145062561668045;
 -0.1377259223536221, 0.9886948571321164, -0.05927942132264701;
 -0.7146313610795862, -0.05775168963233255, 0.6971131616216615] ---> [0.7151081244370459, 0.07789778384430267, 0.6946598488730128;
 -0.08774663500728343, 0.9959139997218364, -0.02135025065316141;
 -0.6934846057476901, -0.04568632651243185, 0.7190214608485412]
T: [-3.948141777796269;
 0.5801938186668008;
 1.33547234007488] ---> [-3.901885408801042;
 0.4513527441179077;
 1.560008064679534]
image 6
R: [0.5345202423609863, 0.1484822420570326, 0.8320102969916111;
 -0.1162789560283232, 0.9880044928885355, -0.1016185338264173;
 -0.8371184592943316, -0.04242812540973497, 0.54537376108766] ---> [0.5683485501454362, 0.0782200551814462, 0.8190613826295267;
 -0.05819510363344085, 0.9967993514904986, -0.05481225028416892;
 -0.8207272722778703, -0.01651289906505848, 0.5710814904230337]
T: [-4.874450348683199;
 0.557715516762857;
 2.312628203267833] ---> [-4.804518798154233;
 0.3684220790457088;
 2.638842985313401]
image 7
R: [0.3804825014515434, 0.1809077191793169, 0.9069208693323325;
 -0.1519184481274522, 0.9795838228834033, -0.1316674563576125;
 -0.9122246714531037, -0.08768084788866157, 0.4001977232641417] ---> [0.414307433578179, 0.09731088639790508, 0.9049198538380715;
 -0.09146279859679882, 0.9936860688623508, -0.06498117436403358;
 -0.9055296278723873, -0.05584431875617726, 0.4205918509766377]
T: [-5.730900513630299;
 0.8945404835906261;
 3.219374565433029] ---> [-5.647045166148383;
 0.6059169485156924;
 3.621241447730414]
image 0
R: [0.8281374556908083, -0.09968295633663969, -0.5515901220090349;
 0.1296526532066541, 0.9914385722856303, 0.01548376248545742;
 0.5453242558317295, -0.08433780647028093, 0.8339715764948779] ---> [0.8504325765838151, -0.06613048109251507, -0.5219110960264073;
 0.07818572867690465, 0.9969382254378749, 0.001080042611375457;
 0.5202416981714122, -0.04172450276819897, 0.8529992036060009]
T: [1.715856961202265;
 0.1429173741811375;
 1.505177634041648] ---> [1.811742211812998;
 0.07304137044262227;
 1.36325466981082]
correspond struct idx max is :4728
structure size is 4729
8 sees 140 points
register image 8
add match 7 --- 8 size:556
solvePnPRansac is 1
after fusion structure size is 5143
delete 3D point:(115.422,21.6286,226.444)
after remove error points size :5142
请按任意键继续. . .